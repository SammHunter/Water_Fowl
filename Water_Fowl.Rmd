---
title: "Water_Fowl_Testing_Area"
author: "Samantha Hunter"
date: "11/19/2021"
output: html_document
---


JSTOR LINK TO STUDY:https://www-jstor-org.prox.lib.ncsu.edu/stable/3783692?seq=2#metadata_info_tab_contents

The data set is from US Fish and Wildlife services. I took the most recent six years of data that was available (2010-2016). Information about the data set can be found (here)[https://migbirdapps.fws.gov/mbdc/databases/afbws/aboutafbws.htm]

The survey's primary target is to estimate the breeding population size of mallards, black ducks, wood ducks, and Canada geese so that is the only data I will be looking at. 
```{r}
library(tidyverse)
getwd()
fowl <- read.csv("duck_data.csv")


fowls<- fowl %>% 
  mutate( 
        # Combining the old goose counts with the new goose counts, 
        # if the new count exists, then that is what we will use, otherwise we'll use the old count...
        # not the best practice but good enough for now
        CanadianGoose = if_else(!is.na(CAGO_TIBN), CAGO_TIBN, CAGO_TIB)) %>%
  
  rename(Year = YEAR, State = STATE, TimeOfDay = CKTYPE, Plot = PLOT, Date = DATE,
          Stratum = STRATUM, WetHab = WETHAB, Handfeed = HANDFEED, 
          Mallard = MALL_TIB, 
          AmBlackDuck = ABDU_TIB, 
          WoodDuck = WODU_TIB) %>%
  
  # Removing extra columns - Have the TIBN and TIB data else where
  # The pairs of birds seems to have been calculated based on the number of birds seen
  # so I am just using the birds variables -> Maybe come back to automate for Pairs
  select(!CAGO_TIB, -CAGO_TIBN, -ends_with("_TIP")) %>%
  
  # Pivoting the table so each observation denotes the count of one species
  # (making it easier to filter)
  pivot_longer(cols = 9:12, names_to = "Species", values_to = "Count") %>%
  
  # filter out the observation if the count is zero
  filter(Count != 0)

install.packages("lubridate")
anydate(fowls$Date)
```


Variable meaning [https://migbirdapps.fws.gov/mbdc/databases/afbws/aboutafbws.htm]

Important Info: All plots are checked annually in 1993

Year: Survey Year
State: State in which sample plot is contained
Stratum: Physiography stratum in which plot is contained- please see map on JSTOR, the numbers indicate what type of environment the area is (eg scrub-shrub estuarine wetlands, estuarine tidal flats, ect)
Plot: ID Variables if you sort data by Year-State-Stratum-Plot

### What I'm Interested In/Questions
1. General Trend of Bird Population
2. Can you estimate next year from previous years? (split data into 2010-2014, predict for 2015)?


# Data Exploration

### Tables
```{r}
attach(fowls)
table(Year)
table(Species)

table(Year, Species)
table(State, Species)
table(Stratum, Species)
table(Species)
```


### Graphs n Such
```{r}
# Just for Mallards
bird <- fowls %>% filter(Species == "Mallard")

time <- ggplot(birds, aes(x = Species, y = Count))

# Counts by bird
time + geom_boxplot()

# Looks at counts when grouped by year


# American Black Ducks


# Wood Ducks


# Total Ducks
```

